# Backup Configuration
# Simple, focused backup strategy for changing data only

# What to backup (the data that actually changes)
BACKUP_TARGETS=(
    "mariadb:full:daily"      # Full database backup
    "mariadb:binlog:15min"    # Transaction logs
    "home:archive:daily"      # User data
    "logs:archive:daily"      # Compliance logs
)

# Local settings
MARIADB_BACKUP_USER="admin"
BINLOG_DIR="/var/log/mysql"  # MariaDB still uses mysql directory name
BINLOG_INDEX="/var/log/mysql/mysql-bin.index"

# State tracking
STATE_DIR="/var/lib/backup-state"
BINLOG_STATE_FILE="$STATE_DIR/processed-binlogs"

# Retention in days (matches SOC 2 requirements)
RETAIN_MARIADB_FULL=90        # 90 days for database backups (contractual requirement)
RETAIN_MARIADB_BINLOG=7       # 7 days for transaction logs (point-in-time recovery window)
RETAIN_HOME_ARCHIVE=90        # 90 days for user data
RETAIN_LOG_ARCHIVE=365        # 1 year for compliance logs

# Email settings for backup notifications
BACKUP_EMAIL_FROM="backup+${SERVER_NAME}@${EMAIL_DOMAIN}"